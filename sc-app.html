<!-- polymer imports -->
<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="bower_components/iron-icons/iron-icons.html">
<link rel="import" href="bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="bower_components/neon-animation/neon-animatable-behavior.html">
<link rel="import" href="bower_components/iron-resizable-behavior/iron-resizable-behavior.html">
<!-- third imports -->

<!-- app imports -->
<link rel="import" href="sc-home.html">
<link rel="import" href="sc-dialog-post.html">
<link rel="import" href="sc-profile.html">
<link rel="import" href="sc-main-page.html">

<dom-module id="sc-app">
<template>
    <style>
    :host {
        -webkit-tap-highlight-color: rgba(0,0,0,0);
    }
    paper-drawer-panel {
      --paper-drawer-panel-main-container: {
        background-color: rgba(19,95,184,0.065);
        border-left: 1px solid rgba(0,0,0, 0.12);
      };
    }
    neon-animated-pages {
      @apply(--layout-flex);
      height: 100%;
    }
    paper-toolbar {
      --paper-toolbar-background: #135FB8;
    }
    paper-toolbar.drawerToolbar {
      @apply(--layout-horizontal);
    }
    paper-toolbar div.drawerMenu {
      width: 40px;
    }
    paper-toolbar span.title {
      @apply(--layout-flex)
    }
    paper-icon-button.clearBtn {
      position: absolute;
      float: right;
      right: 0;
    }
    #menuBack {
      display: none;
    }
    #mainSCPages {
      height: 100%;
    }

    </style>

      <paper-drawer-panel id="panel">
          <paper-header-panel drawer>
            <paper-toolbar class="drawerToolbar">
              <div class="drawerMenu">
                <paper-icon-button id="menuMenu" on-tap="showProfile" icon="menu"></paper-icon-button>
                <paper-icon-button id="menuBack" on-tap="backHome" icon="chevron-left"></paper-icon-button>
              </div>
              <span class="title">Siscomando</span>
              <!--<paper-icon-button icon="refresh"></paper-icon-button>
              <paper-icon-button icon="add">+</paper-icon-button>
              -->
            </paper-toolbar>

            <neon-animated-pages id="pagesDrawer" selected="[[selectedPage]]">
                <sc-home id="home"></sc-home>
                <sc-profile></sc-profile>
            </neon-animated-pages>

          </paper-header-panel>
          <paper-header-panel main>
            <div id="mainSCPages">
                <neon-animated-pages selected="0">
                    <sc-main-page id="mainPage"></sc-main-page>
                    <div>
                     <p>Menu de fundo </p>
                    </div>
                </neon-animated-pages>
            </div>
          </paper-header-panel>

      </paper-drawer-panel>
    </template>
    <script>
      Polymer({
        is: "sc-app",
        behavior: [
          Polymer.NeonAnimationRunnerBehavior,
        ],
        properties: {
          animationConfig: {
            name: 'slide-right-animation',
            node: 'resumePage',
            timing: 700
          },
          selectedPage: {
            type: Number,
            value: 0
          }
        },
        ready: function() {
          var self = this;
          var mainPage = this.$.mainPage;
          var feeds = this.$.mainPage.$.mainFeeds;
          var home = this.$.home;
          // var feedsTicket = this.$.feedsTicket;

          // listens actions to view drawer
          this.addEventListener('show-profile', function() {
            self.selectedPage = 1;
            self.$.menuMenu.style.display = 'none';
            self.$.menuBack.style.display = 'block';
          });
          // back home
          feeds.addEventListener('back-home', function() {
            self.selectedPage = 0;
            self.$.menuMenu.style.display = 'block';
            self.$.menuBack.style.display = 'none';
          });
          // back home list of issues from sc-home
          this.addEventListener('back-home', function() {
            self.selectedPage = 0;
            self.$.menuMenu.style.display = 'block';
            self.$.menuBack.style.display = 'none';
          });
          // listen home item was selected
          home.addEventListener('home-selected', function(){
            feeds.hashtag = home.$.itemsList.selectedItem.hashtag;
            mainPage.titleSection = feeds.hashtag;
            mainPage.toggleMainBtn(true); // changes btn inbox to back (chevron)
            // optional
            self.$.panel.closeDrawer();
          });

          mainPage.addEventListener('home-unselect', function(){
              home.unselect();
          });

        },
        attached: function() {
          /* styling anything */
          var paperDrawerPanel = this.querySelector('paper-drawer-panel');
          paperDrawerPanel.drawerWidth = "350px";
          this.$.mainPage.updateScroll();
        },
        showProfile: function() {
          this.fire('show-profile');
        },
        backHome: function() {
         this.fire('back-home');
       }
      });
    </script>
</dom-module>
